(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a986154"],{"0a1c":function(t,e,a){},"240c":function(t,e,a){"use strict";var n=a("0a1c"),s=a.n(n);s.a},"743e":function(t,e,a){"use strict";var n=a("b4ed"),s=a.n(n);s.a},9209:function(t,e,a){"use strict";var n=a("f24c"),s=a.n(n);s.a},a32f:function(t,e,a){},b4ed:function(t,e,a){},cbde:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"single-page-shadow"},[a("Row",[a("Col",{attrs:{span:"24"}},[a("Card",{attrs:{shadow:""}},[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"md-settings"}}),t._v("\n        基础设置\n      ")],1),a("Tabs",[a("TabPane",{attrs:{label:"数据库连接配置"}},[a("db-settings")],1),a("TabPane",{attrs:{label:"Git仓库配置"}},[a("git-settings")],1)],1)],1)],1)],1)],1)},s=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",[a("Col",{staticStyle:{padding:"0 0 3px 3px"},attrs:{span:"7"}},[a("Card",{staticClass:"show-shadow",attrs:{"dis-hover":!0}},[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"md-refresh"}}),t._v("\n        添加数据库实例\n      ")],1),a("div",{staticClass:"edittable-testauto-con"},[a("Form",{ref:"formValidate",attrs:{model:t.formItem,rules:t.ruleInline}},[a("FormItem",{attrs:{label:"连接名称:",prop:"description"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.description,callback:function(e){t.$set(t.formItem,"description",e)},expression:"formItem.description"}})],1),a("FormItem",{attrs:{label:"连接类型:",prop:"db_type"}},[a("Select",{attrs:{placement:"bottom-start",placeholder:"选择类型"},model:{value:t.formItem.db_type,callback:function(e){t.$set(t.formItem,"db_type",e)},expression:"formItem.db_type"}},t._l(t.connectType,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),a("FormItem",{attrs:{label:"数据库地址:",prop:"host"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.host,callback:function(e){t.$set(t.formItem,"host",e)},expression:"formItem.host"}})],1),a("FormItem",{attrs:{label:"端口:",prop:"port"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.port,callback:function(e){t.$set(t.formItem,"port",e)},expression:"formItem.port"}})],1),a("FormItem",{attrs:{label:"用户名:",prop:"username"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.username,callback:function(e){t.$set(t.formItem,"username",e)},expression:"formItem.username"}})],1),a("FormItem",{attrs:{label:"实例名:",prop:"instance_name"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.instance_name,callback:function(e){t.$set(t.formItem,"instance_name",e)},expression:"formItem.instance_name"}})],1),a("FormItem",{attrs:{label:"密码:",prop:"passwd"}},[a("Input",{attrs:{placeholder:"请输入",type:"password"},model:{value:t.formItem.passwd,callback:function(e){t.$set(t.formItem,"passwd",e)},expression:"formItem.passwd"}})],1),a("Button",{attrs:{type:"primary",loading:t.testLoading},on:{click:function(e){return t.testConnection()}}},[t._v("测试连接")]),a("Button",{staticStyle:{"margin-left":"5px"},attrs:{type:"success",loading:t.addLoading},on:{click:function(e){return t.addConnection()}}},[t._v("确定")]),a("Button",{staticStyle:{"margin-left":"5px"},attrs:{type:"warning"},on:{click:function(e){return t.resetForm()}}},[t._v("重置")])],1)],1)])],1),a("Col",{staticClass:"padding-left-10",attrs:{span:"17"}},[a("Card",{staticClass:"show-shadow",attrs:{"dis-hover":!0}},[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"md-apps"}}),t._v("\n        数据库实例详情表\n      ")],1),a("Input",{staticStyle:{width:"15%"},attrs:{placeholder:"请填写连接名",clearable:""},model:{value:t.query.description,callback:function(e){t.$set(t.query,"description",e)},expression:"query.description"}}),a("Button",{staticClass:"margin-left-10",attrs:{type:"primary"},on:{click:t.queryData}},[t._v("查询")]),a("Button",{staticClass:"margin-left-10",attrs:{type:"warning"},on:{click:t.queryCancel}},[t._v("重置")]),a("div",{staticClass:"edittable-con-1"},[a("Table",{attrs:{columns:t.columns,data:t.tableData,loading:t.tableLoading},scopedSlots:t._u([{key:"action",fn:function(e){var n=e.row;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.viewConnectionModal(n)}}},[t._v("详情")]),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.delConnection(n)}}},[t._v("删除")])]}}])})],1),a("br"),a("Page",{ref:"i-page",attrs:{total:t.totalNumber,"show-elevator":"","page-size":t.page_size},on:{"on-change":t.pageChange}})],1)],1)],1),a("Modal",{attrs:{width:500,okText:"保存"},on:{"on-ok":t.modifyBase},model:{value:t.baseinfo,callback:function(e){t.baseinfo=e},expression:"baseinfo"}},[a("h3",{staticStyle:{color:"#2D8CF0"},attrs:{slot:"header"},slot:"header"},[t._v("数据库连接信息")]),a("Form",{attrs:{"label-width":100,"label-position":"right"}},[a("FormItem",{attrs:{label:"连接名称:"}},[a("Input",{attrs:{readonly:""},model:{value:t.editbaseinfo.description,callback:function(e){t.$set(t.editbaseinfo,"description",e)},expression:"editbaseinfo.description"}})],1),a("FormItem",{attrs:{label:"数据库地址:"}},[a("Input",{model:{value:t.editbaseinfo.host,callback:function(e){t.$set(t.editbaseinfo,"host",e)},expression:"editbaseinfo.host"}})],1),a("FormItem",{attrs:{label:"端口:"}},[a("Input",{model:{value:t.editbaseinfo.port,callback:function(e){t.$set(t.editbaseinfo,"port",e)},expression:"editbaseinfo.port"}})],1),a("FormItem",{attrs:{label:"用户名:"}},[a("Input",{model:{value:t.editbaseinfo.username,callback:function(e){t.$set(t.editbaseinfo,"username",e)},expression:"editbaseinfo.username"}})],1),a("FormItem",{attrs:{label:"密码:"}},[a("Input",{attrs:{type:"password"},model:{value:t.editbaseinfo.passwd,callback:function(e){t.$set(t.editbaseinfo,"passwd",e)},expression:"editbaseinfo.passwd"}})],1)],1)],1)],1)},r=[],i=(a("a32f"),a("34b7")),l={name:"DBSetting",data:function(){return{connectType:[{value:"MYSQL",label:"Mysql"},{value:"ORACLE",label:"Oracle"}],tableData:[],columns:[{title:"连接名称",key:"description"},{title:"类型",key:"db_type"},{title:"数据库地址",key:"host"},{title:"用户名",key:"username"},{title:"操作",key:"action",slot:"action"}],formItem:{description:"",host:"",username:"",instance_name:"",passwd:"",port:"",db_type:"oracle",profile_name:"test",tenant:sessionStorage.getItem("tenant_name")},ruleInline:{description:[{required:!0,message:"请填写连接名称",trigger:"blur"}],host:[{required:!0,message:"请填写连接地址",trigger:"blur"}],db_type:[{required:!0,message:"请选择连接类型",trigger:"blur"}],instance_name:[{required:!0,message:"请填写实例名",trigger:"blur"}],username:[{required:!0,message:"请填写用户名",trigger:"blur"}],port:[{required:!0,message:"请填写端口",trigger:"blur"}],passwd:[{required:!0,message:"请填写密码",trigger:"blur"}]},comList:[],totalNumber:0,currentPage:1,page_size:10,tableLoading:!1,baseinfo:!1,editbaseinfo:{},query:{description:""},testLoading:!1,addLoading:!1}},methods:{resetForm:function(){this.formItem=this.$config.clearObj(this.formItem)},testConnection:function(){var t=this;this.$refs["formValidate"].validate((function(e){e?(t.testLoading=!0,t.formItem.profile_name=t.formItem.description,Object(i["j"])(t.formItem).then((function(e){"success"===e.data.status?t.$Message.success({content:"数据库连通测试已经通过，请添加相应信息",duration:5,closable:!0}):t.$Message.error({content:"无法连接数据库或没有表信息，请确认配置信息",duration:5,closable:!0})})).catch((function(e){t.bus.$emit("errorHandler",e)})).finally((function(){t.testLoading=!1,t.getData()}))):t.$Message.error({content:"请将信息填写完整！",duration:5,closable:!0})}))},addConnection:function(){var t=this;this.$refs["formValidate"].validate((function(e){e&&t.$Modal.confirm({title:"请先测试数据库是否连通！，确认是否保存数据库连接信息！？","z-index":1010,onOk:function(){t.addLoading=!0,Object(i["b"])(t.formItem).then((function(e){"success"===e.data.status?(t.$Message.success({content:"数据连接信息已经保存",duration:5,closable:!0}),t.$refs["formValidate"].resetFields()):t.$Message.error({content:"保存信息错误",duration:5,closable:!0})})).catch((function(e){t.bus.$emit("errorHandler",e)})).finally((function(){t.addLoading=!1,t.getData()}))},onCancel:function(){}})}))},viewConnectionModal:function(t){this.baseinfo=!0,this.editbaseinfo=t},delConnection:function(t){var e=this;this.$Modal.confirm({title:"请确认是否要删除名为：".concat(t.description," 的连接信息吗!?"),"z-index":1010,onOk:function(){e.tableLoading=!0,e.addLoading=!0,Object(i["d"])(t.id).then((function(t){"success"===t.data.status?e.$Message.success({content:"数据连接信息已经保存",duration:5,closable:!0}):e.$Message.success({content:"删除信息失败",duration:5,closable:!0})})).catch((function(t){e.bus.$emit("errorHandler",t)})).finally((function(){e.tableLoading=!1,e.getData()}))},onCancel:function(){}})},getData:function(){var t=this;this.tableLoading=!0;var e=this.page_size,a=this.page_size*(this.currentPage-1);Object(i["h"])(e,a,this.query.description).then((function(e){console.log(e),t.tableData=e.data.data,t.totalNumber=e.data.count})).catch((function(e){t.bus.$emit("errorHandler",e)})).finally((function(){t.tableLoading=!1}))},modifyBase:function(){var t=this;this.baseinfo=!1,Object(i["l"])(this.editbaseinfo).then((function(e){"success"===e.data.status?t.$Message.success({content:"数据连接信息已经保存",duration:5,closable:!0}):t.$Message.error({content:"保存信息错误",duration:5,closable:!0})})).catch((function(e){t.bus.$emit("errorHandler",e)})).finally((function(){t.getData()}))},queryData:function(){this.getData()},queryCancel:function(){this.$config.clearObj(this.query),this.getData()},pageChange:function(t){this.currentPage=t,this.getData()}},mounted:function(){this.getData()}},c=l,u=(a("240c"),a("2877")),d=Object(u["a"])(c,o,r,!1,null,null,null),m=d.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",[a("Col",{attrs:{span:"7"}},[a("Card",{staticClass:"show-shadow",attrs:{"dis-hover":!0}},[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"md-refresh"}}),t._v("\n        添加git仓库\n      ")],1),a("div",{staticClass:"edittable-testauto-con"},[a("Form",{ref:"formValidate",attrs:{model:t.formItem,rules:t.ruleInline}},[a("FormItem",{attrs:{label:"项目名称:",prop:"app_name"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.app_name,callback:function(e){t.$set(t.formItem,"app_name",e)},expression:"formItem.app_name"}})],1),a("FormItem",{attrs:{label:"地址:",prop:"repo_url"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.repo_url,callback:function(e){t.$set(t.formItem,"repo_url",e)},expression:"formItem.repo_url"}})],1),a("FormItem",{attrs:{label:"是否免密:",prop:"is_auth"}},[a("Select",{attrs:{placement:"bottom-start",placeholder:"选择"},model:{value:t.formItem.is_auth,callback:function(e){t.$set(t.formItem,"is_auth",e)},expression:"formItem.is_auth"}},t._l(t.connectType,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),a("FormItem",{attrs:{label:"用户名:",prop:"username"}},[a("Input",{attrs:{placeholder:"请输入",disabled:"0"==t.formItem.is_auth},model:{value:t.formItem.username,callback:function(e){t.$set(t.formItem,"username",e)},expression:"formItem.username"}})],1),a("FormItem",{attrs:{label:"密码:",prop:"password"}},[a("Input",{attrs:{placeholder:"请输入",disabled:"0"==t.formItem.is_auth,type:"password"},model:{value:t.formItem.password,callback:function(e){t.$set(t.formItem,"password",e)},expression:"formItem.password"}})],1),a("Button",{staticStyle:{"margin-left":"5%"},attrs:{type:"success"},on:{click:function(e){return t.addConnection()}}},[t._v("确定")]),a("Button",{staticStyle:{"margin-left":"5%"},attrs:{type:"warning"},on:{click:function(e){return t.resetForm()}}},[t._v("重置")])],1)],1)])],1),a("Col",{staticClass:"padding-left-10",attrs:{span:"17"}},[a("Card",{staticClass:"show-shadow",attrs:{"dis-hover":!0}},[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"md-apps"}}),t._v("\n        Git仓库连接信息表\n      ")],1),a("Input",{staticStyle:{width:"15%"},attrs:{placeholder:"请填写连接名",clearable:""},model:{value:t.query.app_name,callback:function(e){t.$set(t.query,"app_name",e)},expression:"query.app_name"}}),a("Button",{staticClass:"margin-left-10",attrs:{type:"primary"},on:{click:t.queryData}},[t._v("查询")]),a("Button",{staticClass:"margin-left-10",attrs:{type:"warning"},on:{click:t.queryCancel}},[t._v("重置")]),a("div",{staticClass:"edittable-con-1"},[a("Table",{attrs:{columns:t.columns,data:t.tableData,loading:t.tableLoading},scopedSlots:t._u([{key:"action",fn:function(e){var n=e.row;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.viewConnectionModal(n)}}},[t._v("详情")])]}}])})],1),a("br"),a("Page",{ref:"page",attrs:{total:t.totalNumber,"show-elevator":"","page-size":t.page_size},on:{"on-change":t.pageChange}})],1)],1)],1),a("Modal",{attrs:{width:500,okText:"保存"},on:{"on-ok":t.modifyBase},model:{value:t.baseinfo,callback:function(e){t.baseinfo=e},expression:"baseinfo"}},[a("h3",{staticStyle:{color:"#2D8CF0"},attrs:{slot:"header"},slot:"header"},[t._v("Git连接信息")]),a("Form",{attrs:{"label-width":100,"label-position":"right"}},[a("FormItem",{attrs:{label:"项目名称:"}},[a("Input",{attrs:{readonly:""},model:{value:t.editbaseinfo.app_name,callback:function(e){t.$set(t.editbaseinfo,"app_name",e)},expression:"editbaseinfo.app_name"}})],1),a("FormItem",{attrs:{label:"连接地址:"}},[a("Input",{model:{value:t.editbaseinfo.repo_url,callback:function(e){t.$set(t.editbaseinfo,"repo_url",e)},expression:"editbaseinfo.repo_url"}})],1),a("FormItem",{attrs:{label:"是否免密:",prop:"is_auth"}},[a("Select",{attrs:{placement:"bottom-start",placeholder:"选择"},model:{value:t.editbaseinfo.is_auth,callback:function(e){t.$set(t.editbaseinfo,"is_auth",e)},expression:"editbaseinfo.is_auth"}},t._l(t.connectType,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),a("FormItem",{attrs:{label:"用户名:"}},[a("Input",{attrs:{disabled:"0"==t.editbaseinfo.is_auth},model:{value:t.editbaseinfo.username,callback:function(e){t.$set(t.editbaseinfo,"username",e)},expression:"editbaseinfo.username"}})],1),a("FormItem",{attrs:{label:"密码:"}},[a("Input",{attrs:{type:"password",disabled:"0"==t.editbaseinfo.is_auth},model:{value:t.editbaseinfo.password,callback:function(e){t.$set(t.editbaseinfo,"password",e)},expression:"editbaseinfo.password"}})],1)],1)],1)],1)},f=[],b={name:"GitSetting",data:function(){return{connectType:[{value:"0",label:"是"},{value:"1",label:"否"}],tableData:[],columns:[{title:"项目名称",key:"app_name",width:150},{title:"地址",key:"repo_url"},{title:"操作",key:"action",slot:"action",width:100}],formItem:{app_name:"",repo_url:"",username:"",password:"",is_auth:""},ruleInline:{app_name:[{required:!0,message:"请填写项目名",trigger:"blur"}],repo_url:[{required:!0,message:"请填写repo地址",trigger:"blur"}],is_auth:[{required:!0,message:"请选择",trigger:"blur"}]},totalNumber:0,currentPage:1,page_size:10,tableLoading:!1,baseinfo:!1,editbaseinfo:{},query:{app_name:""},testLoading:!1,addLoading:!1}},methods:{resetForm:function(){this.formItem=this.$config.clearObj(this.formItem)},addConnection:function(){var t=this;this.$refs["formValidate"].validate((function(e){e&&t.$Modal.confirm({title:"请确认是否保存代码仓库连接信息","z-index":1010,onOk:function(){t.addLoading=!0,Object(i["a"])(t.formItem).then((function(e){"success"===e.data.status?(t.$Message.success({content:"代码仓库连接信息已经保存",duration:5,closable:!0}),t.$refs["formValidate"].resetFields()):t.$Message.error({content:"保存连接信息错误",duration:5,closable:!0})})).catch((function(e){t.bus.$emit("errorHandler",e)})).finally((function(){t.addLoading=!1,t.getData()}))},onCancel:function(){}})}))},viewConnectionModal:function(t){this.baseinfo=!0,this.editbaseinfo=t},getData:function(){var t=this;this.tableLoading=!0;var e=this.page_size,a=this.page_size*(this.currentPage-1);Object(i["f"])(e,a,this.query.app_name).then((function(e){console.log(e),t.tableData=e.data.data,t.totalNumber=e.data.count})).catch((function(e){t.bus.$emit("errorHandler",e)})).finally((function(){t.tableLoading=!1}))},modifyBase:function(){var t=this;this.baseinfo=!1,Object(i["k"])(this.editbaseinfo).then((function(e){"success"===e.data.status?t.$Message.success({content:"数据连接信息已经保存",duration:5,closable:!0}):t.$Message.error({content:"保存信息错误",duration:5,closable:!0})})).catch((function(e){t.bus.$emit("errorHandler",e)})).finally((function(){t.getData()}))},queryData:function(){this.getData()},queryCancel:function(){this.$config.clearObj(this.query),this.getData()},pageChange:function(t){this.currentPage=t,this.getData()}},mounted:function(){this.getData()}},g=b,h=(a("9209"),Object(u["a"])(g,p,f,!1,null,null,null)),I=h.exports,v={name:"Setting",components:{dbSettings:m,gitSettings:I},data:function(){return{}},methods:{resetForm:function(){}},mounted:function(){}},_=v,y=(a("743e"),Object(u["a"])(_,n,s,!1,null,null,null));e["default"]=y.exports},f24c:function(t,e,a){}}]);
//# sourceMappingURL=chunk-6a986154.16a7ace7.js.map